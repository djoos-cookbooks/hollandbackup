#
# /etc/holland/backupsets/<%= @resource.name %>.conf
#
# (http://docs.hollandbackup.org/config.html)
#
# Generated by Chef for <%= node[:fqdn] %>
#

[holland:backup]
plugin = <%= @resource.plugin %>
backups-to-keep = <%= @resource.backups_to_keep %>
estimated-size-factor = <%= @resource.estimated_size_factor %>
auto-purge-failures = <%= @resource.auto_purge_failures %>
purge-policy = <%= @resource.purge_policy %>
<% unless @resource.before_backup_command.nil? %>
before-backup-command = <%= @resource.before_backup_command %>
<% end %>
<% unless @resource.after_backup_command.nil? %>
after-backup-command = <%= @resource.after_backup_command %>
<% end %>
<% unless @resource.failed_backup_command.nil? %>
failed-backup-command = <%= @resource.failed_backup_command %>
<% end %>

#<% unless @resource.plugin_specific.nil? %>
#	<% if @resource.plugin_specific.respond_to?('each') %>
#[<%= @resource.plugin %>]
#		<% @resource.plugin_specific.each do |key, value| %>
#			<% if value.is_a?(Hash) %>
#<%= "#{key}" %>
#			<% else %>
#<%= "#{key} = #{value}" %>
#			<% end %>
#		<% end %>
#	<% end %>
#<% end %>

## This section defines the configuration options specific to the backup
## plugin. In other words, the name of this section should match the name
## of the plugin defined above.
#[mysqldump]
#file-per-database       = yes
##lock-method        = auto-detect
#
#filtering
##databases          = "*"
#exclude-databases   = <% if @exclude_databases.nil? %><% else %><%= @exclude_databases %><% end %>
##tables             = "*"
##exclude-tables     = "foo.bar"
##stop-slave         = no
##bin-log-position   = no
#
## The following section is for compression. The default, unless the
## mysqldump provider has been modified, is to use inline fast gzip
## compression (which is identical to the commented section below).
#
#<% unless @compression_config.nil? %>
#[compression]
#<% @compression_config.each do |key, value| -%>
#<%= "#{key} = #{value}" %>
#<% end %>
#<% end %>
#
#<% unless @mysql_client_config.nil? %>
#[mysql:client]
#<% @mysql_client_config.each do |key, value| -%>
#<%= "#{key} = #{value}" %>
#<% end %>
#<% end %>